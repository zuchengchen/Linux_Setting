#!/bin/bash
# Memory usage display for i3blocks

# Get memory info (columns: total used free shared buff/cache available)
read -r _ total used _ _ _ available < <(free -m | grep Mem)

# å®žé™…å¯ç”¨ = availableï¼Œå®žé™…ä½¿ç”¨ = total - available
real_used=$((total - available))
used_percent=$((100 * real_used / total))

# Human readable - convert MB to GB
total_gb=$(echo "scale=1;$total/1024" | bc)
used_gb=$(echo "scale=1;$real_used/1024" | bc)
total_str="${total_gb}G"
used_str="${used_gb}G"

# Set color and icon based on usage
if [ "$used_percent" -ge 90 ]; then
    color="#FF5555"
    icon="ðŸ”´"
elif [ "$used_percent" -ge 70 ]; then
    color="#FFB86C"
    icon="ðŸŸ "
elif [ "$used_percent" -ge 50 ]; then
    color="#F1FA8C"
    icon="ðŸŸ¡"
else
    color="#50FA7B"
    icon="ðŸŸ¢"
fi

echo "RAM $used_str/$total_str"
echo "RAM $used_percent%"
echo "$color"
